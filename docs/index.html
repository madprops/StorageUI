<html>
    <head>
        <title>StorageUI</title>

        <meta name="description" content="A javascript library that enables a simple viewer and editor for localStorage data.">

        <meta name="keywords" content="javascript, library, localStorage, local, storage, view, viewer, edit, open, source, mit">

        <link rel='shortcut icon' href="favicon.ico?v=1" type='image/x-icon'> 

        <script src='https://madprops.github.io/Msg/msg.js?v=2'></script>

        <script src='storageui.js?v=2'></script>

        <script>

            var stor = StorageUI(
            {
                items:
                [
                    {
                        name: "Options",
                        ls_name: "options_v1",
                        on_save: function(item)
                        {
                            localStorage.setItem(item.ls_name, item.value);
                            alert(item.ls_name + ' was modified!');
                        },
                        on_reset: function(item)
                        {
                            localStorage.setItem(item.ls_name, JSON.stringify({version:item.ls_name}));
                            alert(item.ls_name + ' was resetted!');
                        },
                        on_copied: function(item)
                        {
                            alert(item.name + ' was copied!');
                        }
                    },
                    {
                        name: "Programs",
                        ls_name: "programs_v1",
                        on_save: function(item)
                        {
                            localStorage.setItem(item.ls_name, item.value);
                            alert(item.ls_name + ' was modified!');
                        },
                        on_reset: function(item)
                        {
                            localStorage.setItem(item.ls_name, JSON.stringify({version:item.ls_name}));
                            alert(item.ls_name + ' was resetted!');
                        },
                        on_copied: function(item)
                        {
                            alert(item.name + ' was copied!');
                        }
                    },
                    {
                        name: "Save History",
                        ls_name: "saved_v1",
                        on_save: function(item)
                        {
                            localStorage.setItem(item.ls_name, item.value);
                            alert(item.ls_name + ' was modified!');
                        },
                        on_reset: function(item)
                        {
                            localStorage.setItem(item.ls_name, JSON.stringify({version:item.ls_name}));
                            alert(item.ls_name + ' was resetted!');
                        },
                        on_copied: function(item)
                        {
                            alert(item.name + ' was copied!');
                        }
                    }
                ],
                msg: Msg(),
                after_reset: function(list)
                {
                    alert('All reset events were fired. Check the console.');
                    console.log(list);
                }
            });

            var s = '{"version":"options_v1","sound":true,"commas":true,"round":true,"round_places":10,"fraction":false,"mixed":false,"theme":"lake"}';

            localStorage.setItem('options_v1', s);

            s = '{"version":"programs_v1","items":[{"name":"clean","primary":{"title":"clean","commands":"remove all lines","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"test1","primary":{"title":"test 1","commands":"insert 544; add line after; prev variable; insert +234; add line after; prev input; move caret to start; insert (; move caret to end; insert )/3; format all; play done","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"F3","primary":{"title":"","commands":"insert this is F3","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"F4","primary":{"title":"","commands":"","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"F5","primary":{"title":"","commands":"","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"F6","primary":{"title":"","commands":"","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"F7","primary":{"title":"","commands":"","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"F8","primary":{"title":"","commands":"","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"formt","primary":{"title":"format","commands":"format all","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"F9","primary":{"title":"","commands":"","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"undo","primary":{"title":"undo","commands":"undo","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}},{"name":"redo","primary":{"title":"redo","commands":"redo","doubleclick":false},"secondary":{"title":"","commands":"","doubleclick":false}}]}';

            localStorage.setItem('programs_v1', s);

            s = '{"version":"saved_v1","items":[["Wednesday, July 26th, 2017, 6:00:00 AM","http://calculator.merkoba.com/X46ROs4j",1,"4/365/*8(4)\n",false],["Wednesday, July 26th, 2017, 5:59:54 AM","http://calculator.merkoba.com/BLWw17sn",1,"4/365/*84//567\n",false],["Wednesday, July 26th, 2017, 5:59:51 AM","http://calculator.merkoba.com/GYyAggLw",1,"4/365/*5435584//567\n",false],["Wednesday, July 26th, 2017, 5:59:48 AM","http://calculator.merkoba.com/rcca1PsB",1,"4/365/*54355\n",false],["Wednesday, July 26th, 2017, 5:59:46 AM","http://calculator.merkoba.com/Zik92u7h",1,"4/365/*5\n",false],["Wednesday, July 26th, 2017, 5:59:42 AM","http://calculator.merkoba.com/DToEJQnN",1,"4/3\n",false],["Monday, July 24th, 2017, 11:41:57 PM","http://calculator.merkoba.com/Pirwf5lL",1,"5\n",false]]}';

            localStorage.setItem('saved_v1', s);

        </script>

        <style>

            body
            {
                max-width: 80%;
                font-family: verdana;
                margin: 0 auto;
                font-size: 20px;
            }
            h1
            {
                letter-spacing: 0.2em;
            }
            h2
            {
                letter-spacing: 0.2em;
            }            
            .clicky
            {
                color: #be5959;
                cursor: pointer;
            }
            a:visited, a:link, a:hover
            {
                color: #be5959;
                text-decoration: none;
            }

        </style>

    </head>

    <body>

        <br><h1>StorageUI</h1>
        
        A javascript library that enables a simple viewer and editor for localStorage data.<br><br>
        It makes it easy to give your site a quick way to copy local storage from one browser to another.<br><br>
        It doesn't modify localStorage, that's up to you via triggered events.<br><br>
        It depends on <a target='_blank' href='https://madprops.github.io/Msg/'>Msg</a> to display the modal windows.<br>

        <br><br>

        To install, include these files:<br>

        <i><blockquote><pre><code>&lt;script src='msg.js'&gt;&lt;/script&gt;</code></pre></blockquote></i>

        <i><blockquote><pre><code>&lt;script src='storageui.js'&gt;&lt;/script&gt;</code></pre></blockquote></i>

        <br><a target='_blank' href='https://github.com/madprops/StorageUI'>Get the code here</a>

        <br><br><br><span class='clicky' onclick='stor.menu()'>Click here for a Demo</span>
        <br><br>

        Demo Code:

        <i><blockquote><pre><code>var stor = StorageUI(
{
    items:
    [
        {
            name: "Options",
            ls_name: "options_v1",
            on_save: function(item)
            {
                localStorage.setItem(item.ls_name, item.value);
                alert(item.ls_name + ' was modified!');
            },
            on_reset: function(item)
            {
                localStorage.setItem(item.ls_name, JSON.stringify({version:item.ls_name}));
                alert(item.ls_name + ' was resetted!');
            },
            on_copied: function(item)
            {
                alert(item.name + ' was copied!');
            }
        },
        {
            name: "Programs",
            ls_name: "programs_v1",
            on_save: function(item)
            {
                localStorage.setItem(item.ls_name, item.value);
                alert(item.ls_name + ' was modified!');
            },
            on_reset: function(item)
            {
                localStorage.setItem(item.ls_name, JSON.stringify({version:item.ls_name}));
                alert(item.ls_name + ' was resetted!');
            },
            on_copied: function(item)
            {
                alert(item.name + ' was copied!');
            }
        },
        {
            name: "Save History",
            ls_name: "saved_v1",
            on_save: function(item)
            {
                localStorage.setItem(item.ls_name, item.value);
                alert(item.ls_name + ' was modified!');
            },
            on_reset: function(item)
            {
                localStorage.setItem(item.ls_name, JSON.stringify({version:item.ls_name}));
                alert(item.ls_name + ' was resetted!');
            },
            on_copied: function(item)
            {
                alert(item.name + ' was copied!');
            }
        }
    ],
    msg: Msg(),
    after_reset: function(list)
    {
        alert('All reset events were fired. Check the console.');
        console.log(list);
    }
}
});

stor.menu();
        </code></pre></blockquote></i>

        <h2>Item Options</h2>

        To create an instance you pass it an object as you can see in the example above.<br><br>
        Each object has a list of items. Each item has the following properties:<br><br>
        <i>name (string)</i>: The displayed name of the localStorage object.<br><br>
        <i>ls_name (string)</i>: The internal name of the localStorage object to be retreived.<br><br>
        <i>on_save (function) [default: Empty Function]</i>: What to do when "Save Modification" was clicked. It receives an item, with "name", "ls_name" and "value" (value of the textarea).<br><br>
        <i>on_reset (function) [default: Empty Function]</i>: What to do when the object was selected to be resetted. It receives an item, with "name" and "ls_name".<br><br>
        <i>on_copied (function) [default: Empty Function]</i>: This triggers after a textarea's value was copied to the clipboard by clicking "Copy To Clipboard". It receives an item, with "name", "ls_name" and "value" (value of the textarea).<br><br>
        <i>on_selected (function) [default: Empty Function]</i>: This triggers after a textarea's text was selected by clicking "Select All". It receives an item, with "name", "ls_name" and "value" (value of the textarea).<br><br>
        <i>show_in_view (boolean) [default: true]</i>: Controls whether the item is shown in the View Data window.<br><br>
        <i>show_in_reset (boolean) [default: true]</i>: Controls whether the item is shown in the Reset Data window.<br><br>

        <h2>General Options</h2>
        <i>msg (Msg instance)</i>: The <a target='_blank' href='https://madprops.github.io/Msg/'>Msg</a> instance to use, this is required.<br><br>
        <i>view_in_menu (boolean) [default: true]</i>: Controls whether "View Data" is shown in the menu window.<br><br>
        <i>reset_in_menu (boolean) [default: true]</i>: Controls whether "Reset Data" is shown in the menu window.<br><br>
        <i>after_reset (function) [default: Empty Function]</i>: Event that triggers after all the on_reset events are fired. It fires even if no item was resetted. It returns a list with pairs of item objects containing "name" and "ls_name" with every item that was resetted.<br>

        <br><h2>Methods</h2>
        <i>instance.menu()</i>: Shows the menu to select either View Data or Reset Data.<br><br>
        <i>instance.view()</i>: Shows the View Data window.<br><br>
        <i>instance.reset()</i>: Shows the Reset Data window.<br><br>

        To control the modal window, refer to the <a target='_blank' href='https://madprops.github.io/Msg/'>Msg</a> documentation.<br>

        <br><br><br><br>
        <br><br><br><br>

    </body>
</html>